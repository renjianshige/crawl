{"version":3,"sources":["read.js"],"names":[],"mappings":"AAAA;AACA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,QAAQ,QAAQ,YAAR,CAAZ;AACA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,QAAQ,QAAQ,OAAR,EAAiB,YAAjB,CAAZ;AACA,QAAQ,KAAR,GAAgB,UAAS,GAAT,EAAc,QAAd,EAAuB;AACnC;AACA,YAAQ,EAAC,GAAD,EAAM,UAAW,IAAjB,EAAR,EAAgC,UAAS,GAAT,EAAc,QAAd,EAAwB,IAAxB,EAA6B;AACzD;AACA,eAAO,MAAM,MAAN,CAAa,IAAb,EAAmB,KAAnB,CAAP;AACA,YAAI,IAAI,QAAQ,IAAR,CAAa,IAAb,CAAR;AACA,YAAI,SAAS,EAAb;AACA,UAAE,sBAAF,EAA0B,IAA1B,CAA+B,YAAU;AACrC;AACA,gBAAI,MAAM,EAAE,IAAF,CAAV;AACA;AACA,gBAAI,QAAQ;AACR,sBAAO,IAAI,IAAJ,EADC;AAER,qBAAM,IAAI,IAAJ,CAAS,MAAT;AAFE,aAAZ;AAIA,kBAAQ,QAAO,MAAM,IAAK,EAA1B;AACA,mBAAO,IAAP,CAAY,KAAZ;AACH,SAVD;AAWA,iBAAS,GAAT,EAAc,MAAd;AACH,KAjBD;AAkBH,CApBD;AAqBA","file":"read-compiled.js","sourcesContent":["//传入url地址返回对象数组\r\nvar request = require(\"request\");\r\nvar iconv = require(\"iconv-lite\");\r\nvar cheerio = require(\"cheerio\");\r\nvar debug = require(\"debug\")(\"crawl:main\");\r\nexports.movie = function(url, callback){\r\n    //请求网址内容\r\n    request({url, encoding : null}, function(err, response, body){\r\n        //实现\r\n        body = iconv.decode(body, \"gbk\");\r\n        var $ = cheerio.load(body);\r\n        var movies = [];\r\n        $(\".keyword .list-title\").each(function(){\r\n            //把当前对象转成jQuery对象\r\n            var $me = $(this);\r\n            //声明一个电影对象 一个是标签文本对象的电影名称，一个是href属性执行向url地址\r\n            var movie = {\r\n                name : $me.text(),\r\n                url : $me.attr(\"href\")\r\n            };\r\n            debug( `读到电影：${movie.name}`)\r\n            movies.push(movie);\r\n        });\r\n        callback(err, movies)\r\n    })\r\n};\r\n/*\r\nexports.movie(\"http://top.baidu.com/buzz?b=26&c=1&fr=topcategory_c1\", function(err, result){\r\n    console.log(result);\r\n\r\n});*/\r\n"]}