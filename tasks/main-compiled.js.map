{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;;;;;;;AAOA,IAAI,OAAO,QAAQ,QAAR,EAAkB,KAA7B;AACA,IAAI,QAAQ,QAAQ,SAAR,EAAmB,KAA/B;AACA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;AACA;AACA,IAAI,QAAQ,QAAQ,OAAR,EAAiB,YAAjB,CAAZ;AACA,IAAI,MAAM,sDAAV;AACA,IAAI,QAAM,QAAQ,UAAR,EAAoB,KAA9B;AACA,MAAM,SAAN,CAAgB;AACZ;AACA,UAAS,QAAT,EAAkB;AACd,UAAM,MAAN,CAAa,EAAb,EAAgB,QAAhB;AACH,CAJW,EAKZ,UAAS,QAAT,EAAkB;AACd,SAAK,GAAL,EAAU,QAAV;AACH,CAPW,EAQZ,UAAS,MAAT,EAAiB,QAAjB,EAA0B;AACtB,UAAM,MAAN,EAAc,QAAd;AACH,CAVW,CAAhB,EAWG,UAAS,GAAT,EAAc,MAAd,EAAqB;AACpB,UAAM,UAAN;AACH,CAbD","file":"main-compiled.js","sourcesContent":["/**\r\n * 1.写一个read模块，用来传入url地址，返回读取后的对象数组\r\n * 2.把上面的对象数组保存在数据库中mongodb\r\n * 3.建立一个web服务器显示保存的数据库\r\n * 4.开启一个计划任务每小时更新一次数据库\r\n * 5.把此项目发布github并且布署阿里云上\r\n */\r\nvar read = require(\"./read\").movie;\r\nvar write = require(\"./write\").movie;\r\nvar async = require(\"async\");\r\n//DEBUG：*\r\nvar debug = require(\"debug\")(\"crawl:main\");\r\nvar url = \"http://top.baidu.com/buzz?b=26&c=1&fr=topcategory_c1\";\r\nvar Movie=require(\"../model\").Movie;\r\nasync.waterfall([\r\n    //在保存之前全部清空掉再往里面写\r\n    function(callback){\r\n        Movie.remove({},callback)\r\n    },\r\n    function(callback){\r\n        read(url, callback);\r\n    },\r\n    function(movies, callback){\r\n        write(movies, callback)\r\n    }\r\n], function(err, result){\r\n    debug(\"全部任务执行完毕\")\r\n});\r\n"]}